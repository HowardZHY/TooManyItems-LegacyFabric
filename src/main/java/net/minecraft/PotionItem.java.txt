package net.minecraft.item;

import java.util.List;
import net.minecraft.entity.LivingEntity;
import net.minecraft.entity.effect.StatusEffectInstance;
import net.minecraft.entity.player.PlayerEntity;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.item.Items;
import net.minecraft.item.itemgroup.ItemGroup;
import net.minecraft.potion.Potion;
import net.minecraft.potion.PotionUtil;
import net.minecraft.stat.Stats;
import net.minecraft.util.ActionResult;
import net.minecraft.util.CommonI18n;
import net.minecraft.util.Hand;
import net.minecraft.util.TypedActionResult;
import net.minecraft.util.UseAction;
import net.minecraft.world.World;

public class PotionItem
extends Item {
    public PotionItem() {
        this.method_3373(1);
        this.method_3348(ItemGroup.BREWING);
    }

    public ItemStack method_3367(ItemStack stack, World worldIn, LivingEntity entityLiving) {
        PlayerEntity entityplayer;
        PlayerEntity playerEntity = entityplayer = entityLiving instanceof PlayerEntity ? (PlayerEntity)entityLiving : null;
        if (entityplayer == null || !entityplayer.abilities.creativeMode) {
            --stack.count;
        }
        if (!worldIn.isClient) {
            for (StatusEffectInstance potioneffect : PotionUtil.getPotionEffects((ItemStack)stack)) {
                entityLiving.addStatusEffect(new StatusEffectInstance(potioneffect));
            }
        }
        if (entityplayer != null) {
            entityplayer.incrementStat(Stats.used((Item)this));
        }
        if (entityplayer == null || !entityplayer.abilities.creativeMode) {
            if (stack.count <= 0) {
                return new ItemStack(Items.GLASS_BOTTLE);
            }
            if (entityplayer != null) {
                entityplayer.inventory.insertStack(new ItemStack(Items.GLASS_BOTTLE));
            }
        }
        return stack;
    }

    public int method_3350(ItemStack stack) {
        return 32;
    }

    public UseAction method_3366(ItemStack stack) {
        return UseAction.DRINK;
    }

    public TypedActionResult<ItemStack> method_11373(ItemStack itemStackIn, World worldIn, PlayerEntity playerIn, Hand hand) {
        playerIn.method_13050(hand);
        return new TypedActionResult(ActionResult.SUCCESS, (Object)itemStackIn);
    }

    public String method_3383(ItemStack stack) {
        return CommonI18n.translate((String)PotionUtil.getPotion((ItemStack)stack).method_11414("potion.effect."));
    }

    public void method_3352(ItemStack stack, PlayerEntity playerIn, List<String> tooltip, boolean advanced) {
        PotionUtil.buildTooltip((ItemStack)stack, tooltip, (float)1.0f);
    }

    public boolean method_3374(ItemStack stack) {
        return !PotionUtil.getPotionEffects((ItemStack)stack).isEmpty();
    }

    public void method_3345(Item itemIn, ItemGroup tab, List<ItemStack> subItems) {
        for (Potion potiontype : Potion.REGISTRY) {
            subItems.add((Object)PotionUtil.setPotion((ItemStack)new ItemStack(itemIn), (Potion)potiontype));
        }
    }
}